"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3658,816],{1723:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var a=n(6540),l=n(6430),s=n(2905),i=n(4848);const d=e=>{let{employees:t,handleEdit:n,handleDelete:d,isAdmin:c,getGenerationList:r,familyTree:o}=e;const[p,x]=(0,a.useState)({}),[m,h]=(0,a.useState)({}),[g,u]=(0,a.useState)({});(0,a.useEffect)((()=>{(async()=>{const e={};(await(0,l.GG)((0,l.rJ)(s.db,"names02"))).forEach((t=>{e[t.id]=t.data().name||"Unknown"})),u(e)})()}),[]);return(0,i.jsx)("div",{className:"contain-table",children:(0,i.jsxs)("table",{className:"striped-table",style:{width:"100%",tableLayout:"fixed"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Name"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"center",width:"150px"},children:"Pick"}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Father"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Mother"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Spouse"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Generation"}),(0,i.jsx)("th",{colSpan:2,className:"text-center",children:"Actions"})]})]})}),(0,i.jsx)("tbody",{children:t?t.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.name}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"center",width:"150px"},children:""===e.pick?p[e.name]?p[e.name]:m[e.name]?m[e.name]:(0,i.jsx)("button",{className:"button",onClick:()=>(async(e,t)=>{const n=r(e,o),a=(e=>e.filter((e=>e.pick&&""!==e.pick.trim())).map((e=>e.name)))(o),i=((e,t)=>{const n=t.find((t=>t.name===e));if(!n||!n.spouse)return[];const a=t.find((e=>e.name===n.spouse));return a?[a.name]:[]})(e,o),d=((e,t)=>{const n=t.find((t=>t.name===e));if(!n||!n.parents_a)return[];const a=n.parents_a;return t.filter((t=>t.parents_a===a&&t.name!==e)).map((e=>e.name))})(e,o),c=((e,t,n,a)=>e.filter((e=>!t.includes(e.name)&&!n.includes(e.name)&&!a.includes(e.name))))(n,i,a,d);if(console.log("Eligible List:",c),c.length>0){const a=c[Math.floor(Math.random()*c.length)];console.log("Random Pick Name:",a);const i=Object.keys(g).find((e=>g[e]===a)),d={name:a,id:i};console.log("Random Pick ID:",i),console.log("Random Pick Data:",d);let r=0;const o=setInterval((()=>{h((t=>({...t,[e]:n[r%n.length].name}))),r+=1}),100);setTimeout((async()=>{clearInterval(o),h((t=>({...t,[e]:null}))),x((t=>({...t,[e]:d.name}))),console.log("Picked Name:",d.name);try{const e=(0,l.H9)(s.db,"names02",t);await(0,l.BN)(e,{pick:i},{merge:!0}),console.log(`Updated Firestore with picked person ID: ${i}`)}catch(n){console.error("Error updating Firestore:",n)}}),3e3)}else console.log("No eligible names available to pick.")})(e.name,e.id),children:"Bunot"}):g[e.pick]||e.pick}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.parents_a}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.parents_b}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.spouse}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.generation}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"right"},children:(0,i.jsx)("button",{onClick:()=>n(e.id),className:"button muted-button",children:"Edit"})}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:(0,i.jsx)("button",{onClick:()=>d(e.id),className:"button muted-button",children:"Delete"})})]})]},e.id))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:c?9:2,children:"No Employees"})})})]})})}},2905:(e,t,n)=>{n.r(t),n.d(t,{db:()=>i});var a=n(223),l=n(6430);const s=(0,a.Wp)({apiKey:"AIzaSyBD2yUpGVaZw6N9x6iex8pbJx20cqA-EK0",authDomain:"employee-database-861a6.firebaseapp.com",projectId:"employee-database-861a6",storageBucket:"employee-database-861a6.appspot.com",messagingSenderId:"69607313080",appId:"1:69607313080:web:99a0f1e74c4fa5c66eae4d"}),i=(0,l.aU)(s)}}]);