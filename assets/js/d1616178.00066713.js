"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7927,816],{3258:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(6540),n=a(6430),l=a(2905),r=a(4848);const c=e=>{let{employees:t,handleEdit:a,handleDelete:c,isAdmin:i,getGenerationList:o,familyTree:d}=e;const[m,x]=(0,s.useState)({}),[p,g]=(0,s.useState)({}),[h,y]=(0,s.useState)({});(0,s.useEffect)((()=>{(async()=>{const e={};(await(0,n.GG)((0,n.rJ)(l.db,"names02"))).forEach((t=>{e[t.id]=t.data().name||"Unknown"})),y(e)})()}),[]);return(0,r.jsx)("div",{className:"flex justify-center mt-6",children:(0,r.jsxs)("table",{className:"table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-100 border-b",children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-center text-sm font-medium text-gray-700",children:"Pick"}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Pick ID "}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Parents"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Spouse"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-sm font-medium text-gray-700",children:"Generation"}),(0,r.jsx)("th",{className:"px-6 py-3 text-center text-sm font-medium text-gray-700",children:"Actions"})]})]})}),(0,r.jsx)("tbody",{children:t&&t.length>0?t.map(((e,t)=>(0,r.jsxs)("tr",{className:(t%2==0?"bg-white":"bg-gray-50")+" hover:bg-gray-100 border-b",children:[(0,r.jsx)("td",{className:"px-6 py-4 text-left text-gray-600",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 text-center text-gray-600",children:""===e.pick?m[e.name]?m[e.name]:p[e.name]?p[e.name]:(0,r.jsx)("button",{className:"px-3 py-1 text-sm text-white bg-blue-500 rounded-lg hover:bg-blue-600",onClick:()=>(async(e,t)=>{const a=o(e,d).filter((t=>t!==e)),s=((e,t)=>e.filter((e=>e.pick&&""!==e.pick.trim())).map((e=>t[e.pick]||e.pick)))(d,h),r=((e,t)=>{const a=t.find((t=>t.name===e));if(!a||!a.spouse)return[];const s=t.find((e=>e.id===a.spouse));return s?[s.name]:[]})(e,d),c=((e,t)=>{const a=t.find((t=>t.name===e));if(!a||!a.parents_a)return[];const s=a.parents_a;return t.filter((t=>t.parents_a===s&&t.name!==e)).map((e=>e.name))})(e,d),i=(e=>e.filter((e=>!1===e.bunot)).map((e=>e.name)))(d),m=((e,t,a,s,n)=>e.filter((e=>!(t.includes(e)||a.includes(e)||s.includes(e)||n.includes(e)))))(a,r,s,c,i);if(console.log("generation",a),console.log("picked",s),console.log("spouse",r),console.log("sibling",c),console.log("noBonut",i),console.log("eligible",m),m.length>0){const s=m[Math.floor(Math.random()*m.length)],r=(0,n.P)((0,n.rJ)(l.db,"names02"),(0,n._M)("name","==",s)),c=(await(0,n.GG)(r)).docs[0],i={id:c.id,...c.data()};console.log(i);let o=0;const d=setInterval((()=>{g((t=>({...t,[e]:a[o%a.length]}))),o+=1}),100);setTimeout((async()=>{clearInterval(d),g((t=>({...t,[e]:null}))),x((t=>({...t,[e]:i.name}))),console.log("Picked Name:",i.name);try{const e=(0,n.H9)(l.db,"names02",t);await(0,n.BN)(e,{pick:i.id},{merge:!0}),console.log(`Updated Firestore with picked person ID: ${i.id}`)}catch(a){console.error("Error updating Firestore:",a)}}),3e3)}else console.log("No eligible names available to pick.")})(e.name,e.id),children:"Bunot"}):h[e.pick]||e.pick}),i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"px-2 py-2 text-left text-gray-600",children:e.id}),(0,r.jsx)("td",{className:"px-2 py-2 text-left text-gray-600",children:e.parents_a}),(0,r.jsx)("td",{className:"px-2 py-2 text-left text-gray-600",children:e.spouse}),(0,r.jsx)("td",{className:"px-2 py-2 text-left text-gray-600",children:e.generation}),(0,r.jsxs)("td",{className:"px-2 py-2 text-center",children:[(0,r.jsx)("button",{onClick:()=>a(e.id),className:"px-3 py-1 text-sm text-gray-600 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>c(e.id),className:"px-3 py-1 text-sm text-gray-600 bg-red-200 rounded-lg hover:bg-red-300",children:"Delete"})]})]})]},e.id))):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:i?7:2,className:"px-6 py-4 text-center text-gray-600",children:"."})})})]})})}},2905:(e,t,a)=>{a.r(t),a.d(t,{db:()=>r});var s=a(223),n=a(6430);const l=(0,s.Wp)({apiKey:"AIzaSyBD2yUpGVaZw6N9x6iex8pbJx20cqA-EK0",authDomain:"employee-database-861a6.firebaseapp.com",projectId:"employee-database-861a6",storageBucket:"employee-database-861a6.appspot.com",messagingSenderId:"69607313080",appId:"1:69607313080:web:99a0f1e74c4fa5c66eae4d"}),r=(0,n.aU)(l)}}]);