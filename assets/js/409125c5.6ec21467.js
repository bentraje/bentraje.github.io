/*! For license information please see 409125c5.6ec21467.js.LICENSE.txt */
"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7382],{3506:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var a=n(6540);function s(e,t,n,a){return new(n||(n=Promise))((function(s,i){function r(e){try{c(a.next(e))}catch(t){i(t)}}function o(e){try{c(a.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}c((a=a.apply(e,t||[])).next())}))}const i=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/i,r="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36,gzip(gfe)",o=/<text start="([^"]*)" dur="([^"]*)">([^<]*)<\/text>/g;class c extends Error{constructor(e){super(`[YoutubeTranscript] \ud83d\udea8 ${e}`)}}class l extends c{constructor(){super("YouTube is receiving too many requests from this IP and now requires solving a captcha to continue")}}class u extends c{constructor(e){super(`The video is no longer available (${e})`)}}class d extends c{constructor(e){super(`Transcript is disabled on this video (${e})`)}}class h extends c{constructor(e){super(`No transcripts are available for this video (${e})`)}}class p extends c{constructor(e,t,n){super(`No transcripts are available in ${e} this video (${n}). Available languages: ${t.join(", ")}`)}}class v{static fetchTranscript(e,t){var n;return s(this,void 0,void 0,(function*(){const a=this.retrieveVideoId(e),s=yield fetch(`https://www.youtube.com/watch?v=${a}`,{headers:Object.assign(Object.assign({},(null==t?void 0:t.lang)&&{"Accept-Language":t.lang}),{"User-Agent":r})}),i=yield s.text(),c=i.split('"captions":');if(c.length<=1){if(i.includes('class="g-recaptcha"'))throw new l;if(!i.includes('"playabilityStatus":'))throw new u(e);throw new d(e)}const v=null===(n=(()=>{try{return JSON.parse(c[1].split(',"videoDetails')[0].replace("\n",""))}catch(e){return}})())||void 0===n?void 0:n.playerCaptionsTracklistRenderer;if(!v)throw new d(e);if(!("captionTracks"in v))throw new h(e);if((null==t?void 0:t.lang)&&!v.captionTracks.some((e=>e.languageCode===(null==t?void 0:t.lang))))throw new p(null==t?void 0:t.lang,v.captionTracks.map((e=>e.languageCode)),e);const g=((null==t?void 0:t.lang)?v.captionTracks.find((e=>e.languageCode===(null==t?void 0:t.lang))):v.captionTracks[0]).baseUrl,f=yield fetch(g,{headers:Object.assign(Object.assign({},(null==t?void 0:t.lang)&&{"Accept-Language":t.lang}),{"User-Agent":r})});if(!f.ok)throw new h(e);return[...(yield f.text()).matchAll(o)].map((e=>{var n;return{text:e[3],duration:parseFloat(e[2]),offset:parseFloat(e[1]),lang:null!==(n=null==t?void 0:t.lang)&&void 0!==n?n:v.captionTracks[0].languageCode}}))}))}static retrieveVideoId(e){if(11===e.length)return e;const t=e.match(i);if(t&&t.length)return t[1];throw new c("Impossible to retrieve Youtube video ID.")}}var g=n(4848);const f=function(){const[e,t]=(0,a.useState)(""),[n,s]=(0,a.useState)(""),[i,r]=(0,a.useState)("");return(0,g.jsxs)("div",{className:"App",children:[(0,g.jsx)("h1",{children:"YouTube Caption Retriever"}),(0,g.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const n=(e=>{const t=e.match(/^.*(youtu.be\/|v\/|\/u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return t&&11===t[2].length?t[2]:null})(e);if(!n)return r("Invalid YouTube URL"),void s("");try{r("");const e=(await v.fetchTranscript(n)).filter((e=>"[Music]"!==e.text)).map((e=>e.text)).join(" ");s(e)}catch(a){r("Failed to fetch captions. This video may not have captions."),s(""),console.error(a)}},children:[(0,g.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Enter YouTube video URL",required:!0}),(0,g.jsx)("button",{type:"submit",children:"Get Captions"})]}),i&&(0,g.jsx)("p",{style:{color:"red"},children:i}),n&&(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{children:"Captions:"}),(0,g.jsx)("pre",{children:n})]})]})}}}]);