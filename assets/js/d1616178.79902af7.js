"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[7927,1486],{3258:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var l=n(6540),a=n(6430),s=n(142),i=n(4848);const d=e=>{let{employees:t,handleEdit:n,handleDelete:d,isAdmin:c,getGenerationList:o,familyTree:r}=e;const[p,x]=(0,l.useState)({}),[h,g]=(0,l.useState)({}),[m,u]=(0,l.useState)({});(0,l.useEffect)((()=>{(async()=>{const e={};(await(0,a.GG)((0,a.rJ)(s.db,"names02"))).forEach((t=>{e[t.id]=t.data().name||"Unknown"})),u(e)})()}),[]);return(0,i.jsx)("div",{className:"contain-table",children:(0,i.jsxs)("table",{className:"striped-table",style:{width:"100%",tableLayout:"fixed"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Name"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"center",width:"150px"},children:"Pick"}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Father"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Mother"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Spouse"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Generation"}),(0,i.jsx)("th",{colSpan:2,className:"text-center",children:"Actions"})]})]})}),(0,i.jsx)("tbody",{children:t?t.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.name}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"center",width:"150px"},children:""===e.pick?p[e.name]?p[e.name]:h[e.name]?h[e.name]:(0,i.jsx)("button",{className:"button",onClick:()=>(async(e,t)=>{const n=o(e,r).filter((t=>t!==e)),l=((e,t)=>e.filter((e=>e.pick&&""!==e.pick.trim())).map((e=>t[e.pick]||e.pick)))(r,m),i=((e,t)=>{const n=t.find((t=>t.name===e));if(!n||!n.spouse)return[];const l=t.find((e=>e.id===n.spouse));return l?[l.name]:[]})(e,r),d=((e,t)=>{const n=t.find((t=>t.name===e));if(!n||!n.parents_a)return[];const l=n.parents_a;return t.filter((t=>t.parents_a===l&&t.name!==e)).map((e=>e.name))})(e,r),c=(e=>e.filter((e=>!1===e.bunot)).map((e=>e.name)))(r),p=((e,t,n,l,a)=>e.filter((e=>!(t.includes(e)||n.includes(e)||l.includes(e)||a.includes(e)))))(n,i,l,d,c);if(console.log("generation",n),console.log("picked",l),console.log("spouse",i),console.log("sibling",d),console.log("noBonut",c),console.log("eligible",p),p.length>0){const l=p[Math.floor(Math.random()*p.length)],i=(0,a.P)((0,a.rJ)(s.db,"names02"),(0,a._M)("name","==",l)),d=(await(0,a.GG)(i)).docs[0],c={id:d.id,...d.data()};console.log(c);let o=0;const r=setInterval((()=>{g((t=>({...t,[e]:n[o%n.length]}))),o+=1}),100);setTimeout((async()=>{clearInterval(r),g((t=>({...t,[e]:null}))),x((t=>({...t,[e]:c.name}))),console.log("Picked Name:",c.name);try{const e=(0,a.H9)(s.db,"names02",t);await(0,a.BN)(e,{pick:c.id},{merge:!0}),console.log(`Updated Firestore with picked person ID: ${c.id}`)}catch(n){console.error("Error updating Firestore:",n)}}),3e3)}else console.log("No eligible names available to pick.")})(e.name,e.id),children:"Bunot"}):m[e.pick]||e.pick}),c&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.parents_a}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.parents_b}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.spouse}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.generation}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"right"},children:(0,i.jsx)("button",{onClick:()=>n(e.id),className:"button muted-button",children:"Edit"})}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:(0,i.jsx)("button",{onClick:()=>d(e.id),className:"button muted-button",children:"Delete"})})]})]},e.id))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:c?9:2,children:"No Employees"})})})]})})}},142:(e,t,n)=>{n.r(t),n.d(t,{db:()=>i});var l=n(223),a=n(6430);const s=(0,l.Wp)({apiKey:"AIzaSyBD2yUpGVaZw6N9x6iex8pbJx20cqA-EK0",authDomain:"employee-database-861a6.firebaseapp.com",projectId:"employee-database-861a6",storageBucket:"employee-database-861a6.appspot.com",messagingSenderId:"69607313080",appId:"1:69607313080:web:99a0f1e74c4fa5c66eae4d"}),i=(0,a.aU)(s)}}]);