"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4940],{9727:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>h});var i=t(4848),r=t(8453);const o={},a="XGen",s={id:"maya/fx/xgen",title:"XGen",description:"General",source:"@site/docs/maya/fx/xgen.md",sourceDirName:"maya/fx",slug:"/maya/fx/xgen",permalink:"/docs/maya/fx/xgen",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/maya/fx/xgen.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Rigid Body",permalink:"/docs/maya/fx/rigid_body"},next:{title:"Equally Distribute Objects",permalink:"/docs/maya/log/equally_distribute_objects"}},l={},h=[{value:"General",id:"general",level:2},{value:"Create Xgen from an Existing Curve?",id:"create-xgen-from-an-existing-curve",level:2},{value:"Xgen Regular/Defactor",id:"xgen-regulardefactor",level:2},{value:"XGen Interactive Grooming Spline",id:"xgen-interactive-grooming-spline",level:2},{value:"Links",id:"links",level:2},{value:"Change Resolution",id:"change-resolution",level:2},{value:"Expressions",id:"expressions",level:2}];function c(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"xgen",children:"XGen"}),"\n",(0,i.jsx)(n.h2,{id:"general",children:"General"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Simulation. Have it face out."}),"\n",(0,i.jsx)(n.li,{children:"Human hair is cut and does not have a taper like fur"}),"\n",(0,i.jsx)(n.li,{children:"Thin out the root for fading."}),"\n",(0,i.jsx)(n.li,{children:"Xgen cant read a project path with spaces in it"}),"\n",(0,i.jsx)(n.li,{children:"Redshift Texture from Image: In Preview/Ouput, create a custom shader parameters."}),"\n",(0,i.jsx)(n.li,{children:"Length Modifier is Cut Off in Xgen."}),"\n",(0,i.jsx)(n.li,{children:"length, density, clumping, noise, curls"}),"\n",(0,i.jsx)(n.li,{}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"create-xgen-from-an-existing-curve",children:"Create Xgen from an Existing Curve?"}),"\n",(0,i.jsx)(n.h2,{id:"xgen-regulardefactor",children:"Xgen Regular/Defactor"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"First off, set your diffuse to black since natural hair has no real diffuse interaction with light so adding diffuse can make hair feel like its full of hair products even when it is used subtly.  Instead, try to get your hair color from Reflection 2 and Translucency. Try to have both of these color be the same so that the hair reacts as expected under many different lighting conditions."}),"\n",(0,i.jsx)(n.li,{children:"Making Curves Dynamic."}),"\n",(0,i.jsx)(n.li,{children:"(A) Click on the guide animation>Use Animation>Create Hair System>Attach hair system. For caching, disable live node and plug-in the alembic."}),"\n",(0,i.jsx)(n.li,{children:"(B) Animwires modifier>Create Maps>Create Hair System>Attach Hair System. Advantage of using B or A is the ability to select how low or high the number of dynamic curves."}),"\n",(0,i.jsx)(n.li,{children:"Collision modifier should be in the highest hierarchy."}),"\n",(0,i.jsx)(n.li,{children:"XGen do not appear in the view port?"}),"\n",(0,i.jsx)(n.li,{children:"One is because of the material problem (2 hours on this!)"}),"\n",(0,i.jsx)(n.li,{children:"The other is GPU outdated"}),"\n",(0,i.jsx)(n.li,{children:"Bake Groom Modifier for faster animation workflow if all the modifier has been finalized."}),"\n",(0,i.jsx)(n.li,{children:"Cannot select my guides? I modify as curve mo muna lahat. then they are selectable."}),"\n",(0,i.jsxs)(n.li,{children:["Base Settings\nCV Count 25\nTaper 0.8 and taper start 0.8\nClumping (Based on guides, T: 0.3, 0.05, T:0.2, 0.1 T:0.1). Then create the middle value to adjust\nThen add Cut.\nThen add noise. Frequency 0.1,Magnitude 5",(0,i.jsx)(n.br,{}),"\n","For cut, additional noise, Fr, 0.1, Mag 20. Then add a mask. Load Expression>Sample>Xgen>Water related>Noise>Noise smoothstep"]}),"\n",(0,i.jsx)(n.li,{children:"By default, clumping modifier results in an error. This is because you need to generate map first."}),"\n",(0,i.jsx)(n.li,{children:"Realistic hair thickness: Root is 0.01 cm and tip is 0.001 . Grass is 0.2 cm and 0.2 cm"}),"\n",(0,i.jsx)(n.li,{children:"It requires a hefty amount of AA Samples"}),"\n",(0,i.jsx)(n.li,{children:"Clump: I\u2019d argue that this is the most important attribute of hair when creating your groom to create something that feels really convincing\nClumping will always happen first.\nParting\nPrimary clumps\nSub clumps (number of sub clumps depends on wetness of the hair)\nIndividual hair strands and Strays"}),"\n",(0,i.jsx)(n.li,{children:"Negative length (Grooming) decreases the fur."}),"\n",(0,i.jsx)(n.li,{children:"Flip to Left/Right for groomable only works if it is in front. facing."}),"\n",(0,i.jsx)(n.li,{children:"Visibility needs to be turned on so the length and width in the grooming tab is transferred to the primitive."}),"\n",(0,i.jsx)(n.li,{children:"Have the existing maps be the color? Create a custom map. Then go the node editor. Show inputs/outputs then drag the map to the color to the xgen."}),"\n",(0,i.jsx)(n.li,{children:"Isolate hair on a specific section, Mask>Create Map"}),"\n",(0,i.jsx)(n.li,{children:"Keep track of the number of CVs on your guide curves, for short hair styles the default of 4 CVs is fine but for more complex shapes try increasing this number. (You can do this using the \u201crebuild\u201d option in the guide tools section of the primitive tab)"}),"\n",(0,i.jsx)(n.li,{children:"Please do not just parent the scalp geometries to joints as XGen will not recognise its movements at rendertime and thus the hair will not follow the mesh.\nInstead, copy your weight paints onto the scalp\nOR use a wrap deformer to attach to scalp to your base geometry."}),"\n",(0,i.jsx)(n.li,{children:"Density Mask is not working? Probably because you don\u2019t have a directory set-up."}),"\n",(0,i.jsx)(n.li,{children:"Plug a separate density map? Go to hypershade and load a new texture. For easy viewing change the tab from materials to textures. To update the xgen, go the 3d paint tool and you should see the new texture then hit save."}),"\n",(0,i.jsx)(n.li,{children:"Right, one quick thing I want to bring up due to some experience I have had with xgen in a animation pipeline, don\u2019t bother putting XGen in you rigs, all it does is cause instability and trouble with referencing. Yes, XGen can now be referenced but with core XGen it is only stable in its first reference, by that I mean you can make your groom in the model file and reference that into the rig but when you try to reference the rig you will start to get issues because of the namespaces. There are two ways to work around this, you can flatten references when you publish the rig but in my opinion a much better way is to ignore XGen and just model some proxy hair for the rigger and animator to use. You can just load XGen in after animation is done but I\u2019ll get back to this later\u2026"}),"\n",(0,i.jsx)(n.li,{children:"The most important setting to set first is your start curve attraction as this setting allows the groom to hold its shape during animation. I tend to set this to a value of 1 and use the \u201cattraction scale\u201d graph to set the tips of the hair to have more movement than the root."}),"\n",(0,i.jsx)(n.li,{children:"3D Paint Tool won\u2019t work on foreign/third party materials"}),"\n",(0,i.jsx)(n.li,{children:"Region map need to be painted in 100% color\u2026 no falloff or soft areas\u2026 if the area is not pure red its going to be a new region\u2026 you need to paint with a solid brush tip."}),"\n",(0,i.jsx)(n.li,{children:"The geo can be in a group, but the XGen collection can\u2019t be in the same group"}),"\n",(0,i.jsx)(n.li,{children:"For hair cards, In Viewport 2.0, make sure \u201cDepth Peeling\u201d is selected, and Transparency Quality is set to 1. This ensures that the hair cards will display correctly when placed on top of each other."}),"\n",(0,i.jsx)(n.li,{children:"Guides: Unevenly spaced, Lack Detail (all goes same direction), Uneven Length"}),"\n",(0,i.jsx)(n.li,{children:"If there are two guides incredibly close together facing in different directions it will create a weird spike/split in the groom."}),"\n",(0,i.jsx)(n.li,{children:"Use Coil"}),"\n",(0,i.jsx)(n.li,{children:"PER COLLECTION: You only need to export patches for batch render ONCE per collection"}),"\n",(0,i.jsx)(n.li,{children:"Make collide not working. Because base resolution is low."}),"\n",(0,i.jsx)(n.li,{children:"Auto resize threshold."}),"\n",(0,i.jsx)(n.li,{children:"Make sure that you export the alembic in world space and that UV write is turned on so you get to keep your UVs."}),"\n",(0,i.jsx)(n.li,{children:"New Xgen Method? Find the animation tab in your xGen description panel and turn animation on, make sure that live mode is active and then click create hairSystem."}),"\n",(0,i.jsx)(n.li,{children:"If the name of your scene changes you will also need to export the patches again, since the patches are save for the specific scene you are in."}),"\n",(0,i.jsx)(n.li,{children:"When meshes deform, they change the spatial relationship of instances between frames, which can create artefacts. XGen provides different techniques to avoid popping Autodesk recommends using Patch References (PRefs)  \u2013 which you will need to employ to create a successful sequence of rendered images."}),"\n",(0,i.jsx)(n.li,{children:"such cases, you can make use of XGen\u2019s utility nodes  to map the UV surface in order to apply any material or ramp, or even an entire shading network, to your groom. This enables you to achieve a more complex look."}),"\n",(0,i.jsx)(n.li,{children:"There are a lot of nodes that you can use, but the one that will be most useful here is xgen_ptex_lookup."}),"\n",(0,i.jsx)(n.li,{children:"Xgen batch group. Export patches. Animation. No need to hide. Export Guides curves. Okay to select only the group. But be sure to not tick the use animation. Finally, turn off. the nucleus otherwise it will not work. Hmmm but it still works when gi on nako. Had to redo this tomorrow."}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://docs.unrealengine.com/5.0/en-US/xgen-guidelines-for-hair-creation-in-unreal-engine/",children:"https://docs.unrealengine.com/5.0/en-US/xgen-guidelines-for-hair-creation-in-unreal-engine/"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"${PROJECT}"})," / din."]}),"\n",(0,i.jsxs)(n.li,{children:["References\n",(0,i.jsx)(n.a,{href:"https://www.artstation.com/artwork/B5ea9",children:"https://www.artstation.com/artwork/B5ea9"}),"\n",(0,i.jsx)(n.a,{href:"https://www.mikecauchiart.com/single-post/2016/10/16/Beginners-guide-to-grooming-maya-2016",children:"https://www.mikecauchiart.com/single-post/2016/10/16/Beginners-guide-to-grooming-maya-2016"}),"\n",(0,i.jsx)(n.a,{href:"http://dishdishdish.blogspot.com/2015/08/creating-maya-hair-using-zbrush.html",children:"http://dishdishdish.blogspot.com/2015/08/creating-maya-hair-using-zbrush.html"}),"\n",(0,i.jsx)(n.a,{href:"http://jesusfc.tumblr.com/",children:"http://jesusfc.tumblr.com/"}),"\n",(0,i.jsx)(n.a,{href:"https://www.mikecauchiart.com/single-post/2017/08/29/Beginners-guide-to-XGen-pipeline-for-beginners",children:"https://www.mikecauchiart.com/single-post/2017/08/29/Beginners-guide-to-XGen-pipeline-for-beginners"}),"\nXGen guides move when mesh moves but not parent locator: ",(0,i.jsx)(n.a,{href:"http://forums.cgsociety.org/showthread.php?t=1419504",children:"http://forums.cgsociety.org/showthread.php?t=1419504"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"xgen-interactive-grooming-spline",children:"XGen Interactive Grooming Spline"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"GROOMING 01 Intro to Yeti \u2013 Lesson 01: Building the first graph"}),"\n",(0,i.jsx)(n.li,{children:"Pro tip: If you\u2019re interested in learning Yeti, you should make a search for \u201cYeti Tutorial by Bj\xf8rn Blaabjerg S\xf8rensen\u201d who has made 11 in depth tutorials on everything you need to know about the software.\u201d"}),"\n",(0,i.jsx)(n.li,{children:"Simulation. Have it face out."}),"\n",(0,i.jsx)(n.li,{children:"Human hair is cut and does not have a taper like fur"}),"\n",(0,i.jsx)(n.li,{children:"Just thin out the root for fading."}),"\n",(0,i.jsx)(n.li,{children:"Xgen cant read a project path with spaces in it"}),"\n",(0,i.jsx)(n.li,{children:"Redshift Texture from Image: In Preview/Ouput, create a custom shader parameters."}),"\n",(0,i.jsx)(n.li,{children:"Heavily dependent on the video card."}),"\n",(0,i.jsx)(n.li,{children:"Adjusting the width the interactive groom? Use the width brush"}),"\n",(0,i.jsx)(n.li,{children:"How about the taper in the interactive groom? It\u2019s on the shape node."}),"\n",(0,i.jsx)(n.li,{children:"Except density and width (which is baked down), all the grooming brushes are stored in a sculpt layer."}),"\n",(0,i.jsx)(n.li,{children:"The modifier are those similar to the regular Xgen splines (i.e. using guides, noise etc)."}),"\n",(0,i.jsx)(n.li,{children:"Now in 2018, there are now clumping and cut modifiers (Yey! Now on par with regular xGen)."}),"\n",(0,i.jsx)(n.li,{children:"Caveat on using density brush. If you have your sculpt at Density Multiplier 10, then go back to 1 to adjust overall proportion and get back to 10, you will lost the details on Multiplier 10. It\u2019s not like Zbrush subdivision levels."}),"\n",(0,i.jsx)(n.li,{children:"You can increase the density of the hair through render time rather than on viewport (Arnold)"}),"\n",(0,i.jsx)(n.li,{children:"Like the regular XGen, dynamics is calculated per guide basis rather than per hair basis for efficiency."}),"\n",(0,i.jsx)(n.li,{children:"Making curves dynamic. Creating linear wire modifier. Click create input wires. Make wires dynamic."}),"\n",(0,i.jsx)(n.li,{children:"On dynamics, hair does not follow the guide. On the magnitude scale, set the root to zero and tip to 1."}),"\n",(0,i.jsx)(n.li,{children:"Two separate ways in deleting the splines/curves. Either from the Density Multiplier or the place Brush. They are mutually exclusive. Splines/curves created by the density multiplier cannot be deleted by place brush"}),"\n",(0,i.jsx)(n.li,{children:"nd vice versa."}),"\n",(0,i.jsx)(n.li,{children:"Lets you convert legacy XGen Descriptions, meaning guides-based or groomable splines Descriptions, to interactive groom Descriptions"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"links",children:"Links"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Motion Matching ",(0,i.jsx)(n.a,{href:"https://www.youtube.com/channel/UCtN5-QXhRHGEmvjBGl9iBow/videos",children:"https://www.youtube.com/channel/UCtN5-QXhRHGEmvjBGl9iBow/videos"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://orcahq.com/jobs",children:"https://orcahq.com/jobs"}),"."]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.upp.cz/join-us",children:"https://www.upp.cz/join-us"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://www.youtube.com/watch?v=08QQ5U7yqvI",children:"https://www.youtube.com/watch?v=08QQ5U7yqvI"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://eyad.tv/home/advanced-rigging/",children:"https://eyad.tv/home/advanced-rigging/"})}),"\n",(0,i.jsxs)(n.li,{children:["Free Alpha Textures ",(0,i.jsx)(n.a,{href:"https://www.artstation.com/deepmind",children:"https://www.artstation.com/deepmind"})]}),"\n",(0,i.jsx)(n.li,{children:"Pro tip: If you\u2019re interested in learning Yeti, you should make a search for \u201cYeti Tutorial by Bj\xf8rn Blaabjerg S\xf8rensen\u201d who has made 11 in depth tutorials on everything you need to know about the software.\u201d"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"change-resolution",children:"Change Resolution"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Hey!\nYou mentioned that region maps do not let you change ptex resolution after you create them, but there is actually a workaround for this!\nHere's the steps:\n- Create region map\n- Copy the path from the region map text box\n- Create region mask\n- Open region mask in the expression editor\n- Copy and paste the first line (Should begin with $a followed by a map path)\n- Replace $a with $b or $RegionMap, naming doesn't matter\n- Replace the string in \" marks and paste the path from the region map text box\n\nIts dumb that we have to make a workaround rather than just having an expression box for region maps, but the method above will basically create a second region map box in your UI, and the expression editor allows you to change the ptex resolution :)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"expressions",children:"Expressions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C",children:"// clump mod masking param\n$perc = 1.0000;\nrandom(0,1)<$perc\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-C",children:"// noise mod frequency param\n// opens up widget like what Houdini can do on attribute wrangle. \n$minValue = 0.1;\n$maxValue = 0.4;\n$seed = 145;\nrand($minValue, $maxValue, $seed)\n"})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var i=t(6540);const r={},o=i.createContext(r);function a(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);