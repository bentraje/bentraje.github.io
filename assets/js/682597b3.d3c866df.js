"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2507,1742,3245,816,455,243,7927],{725:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(6540),s=a(8465),l=a.n(s),i=a(6430),r=a(2905),d=a(4848);const o=e=>{let{employees:t,setEmployees:a,setIsAdding:s,getEmployees:o}=e;const[c,m]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[x,h]=(0,n.useState)(""),[g,f]=(0,n.useState)(""),[y,j]=(0,n.useState)("");return(0,d.jsx)("div",{className:"small-container",children:(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(c&&u&&x&&g&&y))return l().fire({icon:"error",title:"Error!",text:"All fields are required.",showConfirmButton:!0});const n={firstName:c,lastName:u,email:x,salary:g,date:y};t.push(n);try{await(0,i.gS)((0,i.rJ)(r.db,"names02"),{...n})}catch(d){console.log(d)}a(t),s(!1),o(),l().fire({icon:"success",title:"Added!",text:`${c} ${u}'s data has been Added.`,showConfirmButton:!1,timer:1500})},children:[(0,d.jsx)("h1",{children:"Add Employee"}),(0,d.jsx)("label",{htmlFor:"firstName",children:"First Name"}),(0,d.jsx)("input",{id:"firstName",type:"text",name:"firstName",value:c,onChange:e=>m(e.target.value)}),(0,d.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),(0,d.jsx)("input",{id:"lastName",type:"text",name:"lastName",value:u,onChange:e=>p(e.target.value)}),(0,d.jsx)("label",{htmlFor:"email",children:"Email"}),(0,d.jsx)("input",{id:"email",type:"email",name:"email",value:x,onChange:e=>h(e.target.value)}),(0,d.jsx)("label",{htmlFor:"salary",children:"Salary ($)"}),(0,d.jsx)("input",{id:"salary",type:"number",name:"salary",value:g,onChange:e=>f(e.target.value)}),(0,d.jsx)("label",{htmlFor:"date",children:"Date"}),(0,d.jsx)("input",{id:"date",type:"date",name:"date",value:y,onChange:e=>j(e.target.value)}),(0,d.jsxs)("div",{style:{marginTop:"30px"},children:[(0,d.jsx)("input",{type:"submit",value:"Add"}),(0,d.jsx)("input",{style:{marginLeft:"12px"},className:"muted-button",type:"button",value:"Cancel",onClick:()=>s(!1)})]})]})})}},4192:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var n=a(6540),s=a(8465),l=a.n(s),i=a(6430),r=a(2905),d=a(4848);const o=e=>{let{employees:t,selectedEmployee:a,setEmployees:s,setIsEditing:o,getEmployees:c}=e;const m=a.id,[u,p]=(0,n.useState)(a.firstName),[x,h]=(0,n.useState)(a.lastName),[g,f]=(0,n.useState)(a.email),[y,j]=(0,n.useState)(a.salary),[b,v]=(0,n.useState)(a.date);return(0,d.jsx)("div",{className:"small-container",children:(0,d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!(u&&x&&g&&y&&b))return l().fire({icon:"error",title:"Error!",text:"All fields are required.",showConfirmButton:!0});const a={id:m,firstName:u,lastName:x,email:g,salary:y,date:b};await(0,i.BN)((0,i.H9)(r.db,"names02",m),{...a}),s(t),o(!1),c(),l().fire({icon:"success",title:"Updated!",text:`${a.firstName} ${a.lastName}'s data has been updated.`,showConfirmButton:!1,timer:1500})},children:[(0,d.jsx)("h1",{children:"Edit Employee"}),(0,d.jsx)("label",{htmlFor:"firstName",children:"First Name"}),(0,d.jsx)("input",{id:"firstName",type:"text",name:"firstName",value:u,onChange:e=>p(e.target.value)}),(0,d.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),(0,d.jsx)("input",{id:"lastName",type:"text",name:"lastName",value:x,onChange:e=>h(e.target.value)}),(0,d.jsx)("label",{htmlFor:"email",children:"Email"}),(0,d.jsx)("input",{id:"email",type:"email",name:"email",value:g,onChange:e=>f(e.target.value)}),(0,d.jsx)("label",{htmlFor:"salary",children:"Salary ($)"}),(0,d.jsx)("input",{id:"salary",type:"number",name:"salary",value:y,onChange:e=>j(e.target.value)}),(0,d.jsx)("label",{htmlFor:"date",children:"Date"}),(0,d.jsx)("input",{id:"date",type:"date",name:"date",value:b,onChange:e=>v(e.target.value)}),(0,d.jsxs)("div",{style:{marginTop:"30px"},children:[(0,d.jsx)("input",{type:"submit",value:"Update"}),(0,d.jsx)("input",{style:{marginLeft:"12px"},className:"muted-button",type:"button",value:"Cancel",onClick:()=>o(!1)})]})]})})}},633:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});a(6540);var n=a(8148),s=a(4848);const l=e=>{let{setIsAdding:t,setIsAuthenticated:a,isAdmin:l}=e;return(0,s.jsxs)("header",{children:[(0,s.jsx)("h1",{children:"Tatay Nanding and Lola Inday Family Tree"}),(0,s.jsxs)("div",{style:{marginTop:"30px",marginBottom:"18px"},children:[l&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{onClick:()=>t(!0),children:"Add Relative"})}),(0,s.jsx)(n.default,{setIsAuthenticated:a})]})]})}},3258:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var n=a(6540),s=a(6430),l=a(2905),i=a(4848);const r=e=>{let{employees:t,handleEdit:a,handleDelete:r,isAdmin:d,getGenerationList:o,familyTree:c}=e;const[m,u]=(0,n.useState)({}),[p,x]=(0,n.useState)({}),[h,g]=(0,n.useState)({});(0,n.useEffect)((()=>{(async()=>{const e={};(await(0,s.GG)((0,s.rJ)(l.db,"names02"))).forEach((t=>{e[t.id]=t.data().name||"Unknown"})),g(e)})()}),[]);return(0,i.jsx)("div",{className:"contain-table",children:(0,i.jsxs)("table",{className:"striped-table",style:{width:"100%",tableLayout:"fixed"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Name"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"center",width:"150px"},children:"Pick"}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Father"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Mother"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Spouse"}),(0,i.jsx)("th",{style:{padding:"10px",textAlign:"left"},children:"Generation"}),(0,i.jsx)("th",{colSpan:2,className:"text-center",children:"Actions"})]})]})}),(0,i.jsx)("tbody",{children:t?t.map((e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.name}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"center",width:"150px"},children:""===e.pick?m[e.name]?m[e.name]:p[e.name]?p[e.name]:(0,i.jsx)("button",{className:"button",onClick:()=>(async(e,t)=>{const a=o(e,c).filter((t=>t!==e)),n=((e,t)=>e.filter((e=>e.pick&&""!==e.pick.trim())).map((e=>t[e.pick]||e.pick)))(c,h),i=((e,t)=>{const a=t.find((t=>t.name===e));if(!a||!a.spouse)return[];const n=t.find((e=>e.id===a.spouse));return n?[n.name]:[]})(e,c),r=((e,t)=>{const a=t.find((t=>t.name===e));if(!a||!a.parents_a)return[];const n=a.parents_a;return t.filter((t=>t.parents_a===n&&t.name!==e)).map((e=>e.name))})(e,c),d=(e=>e.filter((e=>!1===e.bunot)).map((e=>e.name)))(c),m=((e,t,a,n,s)=>e.filter((e=>!(t.includes(e)||a.includes(e)||n.includes(e)||s.includes(e)))))(a,i,n,r,d);if(console.log("generation",a),console.log("picked",n),console.log("spouse",i),console.log("sibling",r),console.log("noBonut",d),console.log("eligible",m),m.length>0){const n=m[Math.floor(Math.random()*m.length)],i=(0,s.P)((0,s.rJ)(l.db,"names02"),(0,s._M)("name","==",n)),r=(await(0,s.GG)(i)).docs[0],d={id:r.id,...r.data()};console.log(d);let o=0;const c=setInterval((()=>{x((t=>({...t,[e]:a[o%a.length]}))),o+=1}),100);setTimeout((async()=>{clearInterval(c),x((t=>({...t,[e]:null}))),u((t=>({...t,[e]:d.name}))),console.log("Picked Name:",d.name);try{const e=(0,s.H9)(l.db,"names02",t);await(0,s.BN)(e,{pick:d.id},{merge:!0}),console.log(`Updated Firestore with picked person ID: ${d.id}`)}catch(a){console.error("Error updating Firestore:",a)}}),3e3)}else console.log("No eligible names available to pick.")})(e.name,e.id),children:"Bunot"}):h[e.pick]||e.pick}),d&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.parents_a}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.parents_b}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.spouse}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:e.generation}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"right"},children:(0,i.jsx)("button",{onClick:()=>a(e.id),className:"button muted-button",children:"Edit"})}),(0,i.jsx)("td",{style:{padding:"10px",textAlign:"left"},children:(0,i.jsx)("button",{onClick:()=>r(e.id),className:"button muted-button",children:"Delete"})})]})]},e.id))):(0,i.jsx)("tr",{children:(0,i.jsx)("td",{colSpan:d?9:2,children:"No Employees"})})})]})})}},8278:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var n=a(6540),s=a(6430),l=a(7391),i=a(8465),r=a.n(i),d=a(633),o=a(3258),c=a(725),m=a(4192),u=a(2905),p=a(4848);const x=(e,t)=>{const a=t.find((t=>t.name===e));if(!a)return[];const n=a.generation;return t.filter((e=>e.generation===n)).map((e=>e.name))},h=e=>{let{setIsAuthenticated:t}=e;const[a,i]=(0,n.useState)(),[h,g]=(0,n.useState)(null),[f,y]=(0,n.useState)(!1),[j,b]=(0,n.useState)(!1),[v,N]=(0,n.useState)([]),[A,w]=(0,n.useState)(!1),C=async()=>{const e=(0,l.xI)().currentUser,t=e.email,a=(t.split("@")[0],e.uid);w(["admin@example.com","admin2@example.com"].includes(t));const n="andon",r=(await(0,s.GG)((0,s.rJ)(u.db,"names02"))).docs.map((e=>e.data()));((e,t)=>{const a=t.find((t=>t.name===e));if(!a)return[];const n=a.parents_a||"";t.filter((t=>t.parents_a===n&&t.name!==e)).map((e=>e.name))})(n,r);N(r);x(n,r);const d=(0,s.P)((0,s.rJ)(u.db,"names02"),(0,s._M)("point_person","==",a)),o=(await(0,s.GG)(d)).docs.map((e=>({id:e.id,...e.data()})));i(o)};(0,n.useEffect)((()=>{const e=(0,l.xI)();(0,l.hg)(e,(e=>{e?C():t(!1)}))}),[]);return(0,p.jsxs)("div",{className:"container",children:[!f&&!j&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.default,{setIsAdding:y,setIsAuthenticated:t,isAdmin:A}),(0,p.jsx)(o.default,{employees:a,handleEdit:e=>{const[t]=a.filter((t=>t.id===e));g(t),b(!0)},handleDelete:e=>{r().fire({icon:"warning",title:"Are you sure?",text:"You won't be able to revert this!",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!"}).then((t=>{if(t.value){const[t]=a.filter((t=>t.id===e));(0,s.kd)((0,s.H9)(u.db,"names02",e)),r().fire({icon:"success",title:"Deleted!",text:`${t.firstName} ${t.lastName}'s data has been deleted.`,showConfirmButton:!1,timer:1500});const n=a.filter((t=>t.id!==e));i(n)}}))},isAdmin:A,getGenerationList:x,familyTree:v})]}),f&&(0,p.jsx)(c.default,{employees:a,setEmployees:i,setIsAdding:y,getEmployees:C}),j&&(0,p.jsx)(m.default,{employees:a,selectedEmployee:h,setEmployees:i,setIsEditing:b,getEmployees:C})]})}},8148:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});a(6540);var n=a(8465),s=a.n(n),l=a(7391),i=a(4848);const r=e=>{let{setIsAuthenticated:t}=e;return(0,i.jsx)("button",{style:{marginLeft:"12px"},className:"muted-button",onClick:()=>{const e=(0,l.xI)();(0,l.CI)(e).then((()=>{s().fire({icon:"question",title:"Logging Out",text:"Are you sure you want to log out?",showCancelButton:!0,confirmButtonText:"Yes"}).then((e=>{e.value&&s().fire({timer:1500,showConfirmButton:!1,willOpen:()=>{s().showLoading()},willClose:()=>{t(!1)}})}))})).catch((e=>{console.log(e)}))},children:"Logout"})}},2905:(e,t,a)=>{a.r(t),a.d(t,{db:()=>i});var n=a(223),s=a(6430);const l=(0,n.Wp)({apiKey:"AIzaSyBD2yUpGVaZw6N9x6iex8pbJx20cqA-EK0",authDomain:"employee-database-861a6.firebaseapp.com",projectId:"employee-database-861a6",storageBucket:"employee-database-861a6.appspot.com",messagingSenderId:"69607313080",appId:"1:69607313080:web:99a0f1e74c4fa5c66eae4d"}),i=(0,s.aU)(l)}}]);